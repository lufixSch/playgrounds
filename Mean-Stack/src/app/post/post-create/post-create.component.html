<ons-card class="my-form">
  <svg
    *ngIf="isloading"
    class="progress-circular progress-circular--indeterminate"
  >
    <circle class="progress-circular__background" />
    <circle
      class="progress-circular__primary progress-circular--indeterminate__primary"
    />
    <circle
      class="progress-circular__secondary progress-circular--indeterminate__secondary"
    />
  </svg>
  <form [formGroup]="form" *ngIf="!isloading" (submit)="onSavePost()">
    <div class="title">
      <input
        type="text"
        class="text-input"
        placeholder="Title"
        name="title"
        formControlName="title"
        required
        minlength="3"
        (blur)="onBlurTitle()"
      />
      <button
        class="button button--light pickImage"
        type="button"
        (click)="filePicker.click()"
      >
        Pick Image
      </button>
      <div
        class="imagePreview"
        *ngIf="imagePreview && imagePreview !== '' && form.get('image').valid"
      >
        <img [src]="imagePreview" [alt]="form.value.title" />
      </div>
      <div
        class="imagePreview"
        *ngIf="mode == 'edit' && form.get('image').valid && imagePreview == ''"
      >
        <img [src]="post.imagePath" [alt]="form.value.title" />
      </div>
      <input
        class="hidden"
        type="file"
        #filePicker
        (change)="onImagePicked($event)"
      />
    </div>
    <app-alert *ngIf="!form.get('title').valid && !titleValidation"></app-alert>
    <div class="content">
      <textarea
        class="textarea"
        rows="10"
        placeholder="What are you doing?"
        name="content"
        formControlName="content"
        required
        (blur)="onBlurContent()"
      ></textarea>
      <app-alert
        *ngIf="!form.get('content').valid && !contentValidation"
      ></app-alert>
      <hr />
      <button class="button" type="submit">Save</button>
    </div>
  </form>
</ons-card>
